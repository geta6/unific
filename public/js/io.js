!function(){$(function(){var t,e,n,i,o;return $(".alert").hide(),$("button.close").click(function(t){return t.currentTarget.parentElement.style.display="none"}),o=io.connect(),i=window.location.pathname.substr(1),t=[],o.on("connect",function(){return n()?(o.emit("connect stream",i),o.emit("sync stream",i),0===t.length&&$("#NoFeedIsAdded").show(),setInterval(function(){return console.log("sync"),o.emit("sync stream",i)},3e5),$("#FindFeedButton").click(function(){var t;return $("#NoFeedIsFound").hide(),t=$("#FindFeedInput").val(),o.emit("find feed",t)}),o.on("found feed",function(t,e){var n,i,o,l;if(null!=t&&$("#NoFeedIsFound").show(),null!=e){for($("#CandidatesModalWindow").find("#CandidatesList").html(""),o=0,l=e.length;l>o;o++)i=e[o],null==i.title&&(i.title=i.url),n="<li><input type='checkbox' title= '"+i.title+"' value='"+i.url+"'>  "+i.title+"</li>",$("#CandidatesList").append(n);return $("#CandidatesModalWindow").modal()}}),o.on("sync completed",function(n){var i,o,l,c;for(t=t.concat(n),t=_.uniq(t,function(t){return t.page.title}),0!==t.length&&$("#NoFeedIsAdded").hide(),$("#Articles").html(""),c=[],o=0,l=t.length;l>o;o++)i=t[o],c.push(e(i));return c}),$("#AddFeedButton").click(function(){var t;return t=[],$("#CandidatesList").find(":checkbox:checked").each(function(){return t.push({url:$(this).val(),title:$(this).attr("title")})}),0!==t.length?o.emit("add feed",{urls:t,stream:i}):void 0}),o.on("add-feed succeed",function(){return $("#NewFeedIsAdded").show(),console.log("sync"),o.emit("sync stream",i)}),o.on("error",function(){return $("#SomethingWrong").show()})):$("#GoButton").click(function(){return window.location.href=$("#GoInput").val()})}),n=function(){return""===i?!1:!0},e=function(t){var e,n,i,o,l,c;return l=t.page.title,e=t.page.comments,n=t.page.description,c=t.page.url,i=t.feed.title,o=t.feed.site,$("#Articles").append("<li class='media well'><div class='contents'><a href='#' class='pull-left'><img src='/images/no_image.png' class='media-object'/></a><div class='media-body'><a href="+c+"><h4 class='media-heading'>"+l+"<a href="+o+"><small>  "+i+"</small></a></h4><i class='icon-comments-alt'>  Comments("+e.length+") </i><i class='icon-star-empty'> starred</i></a><p> "+n+"</p><button class='btn'>Read More</button>   <button class='btn btn-info'><i class='icon-star'></i>  Star</button></div></div></li>")}})}.call(this);