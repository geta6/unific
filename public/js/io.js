!function(){$(function(){var e,n,t,i,o,l;return $(".alert").hide(),$("button.close").click(function(e){return e.currentTarget.parentElement.style.display="none"}),l=io.connect(),o=window.location.pathname.substr(1),e=[],l.on("connect",function(){return i()?(l.emit("connect stream",o),l.emit("sync stream",o),0===e.length&&$("#NoFeedIsAdded").show(),setInterval(function(){return console.log("sync"),l.emit("sync stream",o)},3e5),$("#FindFeedButton").click(function(){var e;return $("#NoFeedIsFound").hide(),e=$("#FindFeedInput").val(),l.emit("find feed",e)}),l.on("found feed",function(e,n){var t,i,o,l;if(null!=e&&$("#NoFeedIsFound").show(),null!=n){for($("#CandidatesModalWindow").find("#CandidatesList").html(""),o=0,l=n.length;l>o;o++)i=n[o],null==i.title&&(i.title=i.url),t="<li><input type='checkbox' title= '"+i.title+"' value='"+i.url+"'>  "+i.title+"</li>",$("#CandidatesList").append(t);return $("#CandidatesModalWindow").modal()}}),l.on("sync completed",function(i){return t(e,i,function(t){var i,o,l;for(t.length>0?console.log("new article added"):console.log("no article added"),e=e.concat(t),e=_.uniq(e,function(e){return e.page._id}),0!==e.length&&$("#NoFeedIsAdded").hide(),o=0,l=t.length;l>o;o++)i=t[o],n(i);return t.length>0?$("#NewArticleIsAdded").show().fadeIn(500):void 0})}),$("#AddFeedButton").click(function(){var e;return e=[],$("#CandidatesList").find(":checkbox:checked").each(function(){return e.push({url:$(this).val(),title:$(this).attr("title")})}),0!==e.length?l.emit("add feed",{urls:e,stream:o}):void 0}),l.on("add-feed succeed",function(){return $("#NewFeedIsAdded").show(),console.log("sync"),l.emit("sync stream",o)}),l.on("error",function(){return $("#SomethingWrong").show()})):$("#GoButton").click(function(){return window.location.href=$("#GoInput").val()})}),i=function(){return""===o?!1:!0},t=function(e,n,t){var i,o;return o=_.map(e,function(e){return e.page._id}),i=_.filter(n,function(e){return _.contains(o,e.page._id)?!1:!0}),t(i)},n=function(e){var n,t,i,o,l,a;return l=e.page.title,n=e.page.comments,t=e.page.description,a=e.page.url,i=e.feed.title,o=e.feed.site,$("#Articles").append("<li class='media well'><div class='contents'><a href='#' class='pull-left'><img src='/images/no_image.png' class='media-object'/></a><div class='media-body'><a href="+a+"><h4 class='media-heading'>"+l+"<a href="+o+"><small>  "+i+"</small></a></h4><i class='icon-comments-alt'>  Comments("+n.length+") </i><i class='icon-star-empty'> starred</i></a><p> "+t+"</p><button class='btn'>Read More</button>   <button class='btn btn-info'><i class='icon-star'></i>  Star</button></div></div></li>").hide().fadeIn(300)}})}.call(this);